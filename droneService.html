<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Service Profiles</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        header {
            background-color: #333;
            color: white;
            padding: 1em 0;
            text-align: center;
            position: relative;
        }
        nav {
            position: absolute;
            top: 0;
            right: 0;
            padding: 1em;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 0 0.5em;
        }
        .container {
            width: 80%;
            margin: auto;
            overflow: hidden;
            padding: 2em 0;
        }
        .filter-container {
            display: none;
            margin-bottom: 1em;
        }
        .profile {
            background-color: white;
            margin: 1em 0;
            padding: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .profile h3 {
            margin: 0;
            padding-bottom: 0.5em;
        }
        .profile .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5em;
        }
        .footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1em 0;
            position: fixed;
            width: 100%;
            bottom: 0;
        }
        .popup {
            display: none;
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translate(-50%, 0);
            width: 80%;
            background-color: white;
            padding: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
            z-index: 1000;
        }
        .popup h2 {
            text-align: center;
        }
        .popup label {
            display: block;
            margin: 0.5em 0 0.2em;
        }
        .popup input, .popup select {
            width: 100%;
            padding: 0.5em;
            margin-bottom: 1em;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .popup button {
            display: block;
            width: 100%;
            padding: 0.5em;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .popup button:hover {
            background-color: #555;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }
    </style>
</head>
<body>
    <header>
        <h1>Drone Service</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="droneService.html">Drone Service</a>
            <a href="geodeticSurveying.html">Geodetic Surveying</a>
            <a href="login.html">Login</a>
        </nav>
    </header>
    <div class="container">
        <div class="filter-container" id="filterContainer">
            <h2>Filter Profiles</h2>
            <label for="stateFilter">State:</label>
            <select id="stateFilter" onchange="updateKrajOptions('filter')">
                <option value="">Select State</option>
                <option value="SK">Slovakia</option>
                <option value="CZ">Czech Republic</option>
            </select>
            <label for="krajFilter">Kraj:</label>
            <select id="krajFilter">
                <option value="">Select Kraj</option>
            </select>
            <button onclick="filterProfiles()">Search</button>
        </div>
        <button onclick="toggleFilter()">Filter</button>
        <div class="profile">
            <div class="info-row">
                <h3>John Doe</h3>
                <p>Bratislavský kraj</p>
                <a href="profile1.html">Profile</a>
                <p class="feedback">4/5 ★★★★☆</p>
            </div>
        </div>
        <button onclick="togglePopup()">Create New Profile</button>
    </div>
    <div class="footer">
        <p>&copy; 2024 Drone and Geodetic Surveying Services</p>
    </div>
    <div class="overlay" id="overlay" onclick="togglePopup()"></div>
    <div class="popup" id="createProfilePopup">
        <h2>Create New Profile</h2>
        <label for="name">Name and Last Name:</label>
        <input type="text" id="name" required>
        <label for="state">State:</label>
        <select id="state" onchange="updateKrajOptions('create')" required>
            <option value="">Select State</option>
            <option value="SK">Slovakia</option>
            <option value="CZ">Czech Republic</option>
        </select>
        <label for="kraj">Kraj:</label>
        <select id="kraj" required>
            <option value="">Select Kraj</option>
        </select>
        <label for="code">Code:</label>
        <input type="text" id="code" required>
        <button onclick="createProfile()">Save Profile</button>
    </div>
    <script>
        function toggleFilter() {
            const filterContainer = document.getElementById('filterContainer');
            filterContainer.style.display = filterContainer.style.display === 'none' ? 'block' : 'none';
        }

        function togglePopup() {
            const popup = document.getElementById('createProfilePopup');
            const overlay = document.getElementById('overlay');
            const isVisible = popup.style.display === 'block';
            popup.style.display = isVisible ? 'none' : 'block';
            overlay.style.display = isVisible ? 'none' : 'block';
        }

        function updateKrajOptions(context) {
            const state = context === 'filter' ? document.getElementById('stateFilter').value : document.getElementById('state').value;
            const krajSelect = context === 'filter' ? document.getElementById('krajFilter') : document.getElementById('kraj');
            krajSelect.innerHTML = '<option value="">Select Kraj</option>';

            if (state === 'SK') {
                const kraje = [
                    'Bratislavský kraj',
                    'Trnavský kraj',
                    'Trenčiansky kraj',
                    'Nitriansky kraj',
                    'Žilinský kraj',
                    'Banskobystrický kraj',
                    'Prešovský kraj',
                    'Košický kraj'
                ];
                kraje.forEach(kraj => {
                    const option = document.createElement('option');
                    option.value = kraj;
                    option.textContent = kraj;
                    krajSelect.appendChild(option);
                });
            } else if (state === 'CZ') {
                const kraje = [
                    'Hlavní město Praha',
                    'Středočeský kraj',
                    'Jihočeský kraj',
                    'Plzeňský kraj',
                    'Karlovarský kraj',
                    'Ústecký kraj',
                    'Liberecký kraj',
                    'Královéhradecký kraj',
                    'Pardubický kraj',
                    'Kraj Vysočina',
                    'Jihomoravský kraj',
                    'Olomoucký kraj',
                    'Moravskoslezský kraj',
                    'Zlínský kraj'
                ];
                kraje.forEach(kraj => {
                    const option = document.createElement('option');
                    option.value = kraj;
                    option.textContent = kraj;
                    krajSelect.appendChild(option);
                });
            }
        }

        function filterProfiles() {
            const state = document.getElementById('stateFilter').value;
            const kraj = document.getElementById('krajFilter').value;
            // Implement filter logic here, e.g., send a request to the backend to fetch filtered profiles
            console.log('Filtering profiles by:', state, kraj);
        }

        function createProfile() {
            const name = document.getElementById('name').value;
            const state = document.getElementById('state').value;
            const kraj = document.getElementById('kraj').value;
            const code = document.getElementById('code').value;

            // Implement profile creation logic here, e.g., send a request to the backend to save the profile
            console.log('Creating profile:', { name, state, kraj, code });

            // After creating the profile, close the popup
            togglePopup();
        }
    </script>
</body>
</html>
